# ğŸš€ å¦‚ä½•å¯åŠ¨åç«¯æœåŠ¡

## âœ… å·²ä¿®å¤çš„é…ç½®

åç«¯ç°åœ¨é…ç½®ä¸ºåœ¨ **3000ç«¯å£** è¿è¡Œï¼ˆä¸å†æ˜¯3002ï¼‰

## å¿«é€Ÿå¯åŠ¨

### æ–¹æ³•1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
./å¯åŠ¨åç«¯.sh
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æŸ¥å¹¶é‡Šæ”¾3000ç«¯å£
- âœ… æ£€æŸ¥.envæ–‡ä»¶
- âœ… æ£€æŸ¥Prisma Client
- âœ… å¯åŠ¨åç«¯æœåŠ¡

### æ–¹æ³•2ï¼šç›´æ¥è¿è¡Œ

```bash
npx tsx backend/src/index.ts
```

### æ–¹æ³•3ï¼šæŒ‡å®šç«¯å£è¿è¡Œ

```bash
PORT=3000 npx tsx backend/src/index.ts
```

## éªŒè¯åç«¯è¿è¡Œ

å¯åŠ¨åï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ï¼š

```
âœ… Server running on http://localhost:3000
```

### æµ‹è¯•API

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
- http://localhost:3000/health

åº”è¯¥è¿”å›ï¼š
```json
{"status":"ok"}
```

æˆ–ä½¿ç”¨curlæµ‹è¯•ï¼š
```bash
curl http://localhost:3000/health
```

## å‰ææ¡ä»¶

### 1. æ•°æ®åº“å¿…é¡»è¿è¡Œ

```bash
# å¯åŠ¨PostgreSQL
docker-compose up -d

# éªŒè¯æ•°æ®åº“è¿è¡Œ
docker ps
```

### 2. ç¡®ä¿.envæ–‡ä»¶å­˜åœ¨

âœ… å·²æ£€æŸ¥ï¼š.envæ–‡ä»¶å­˜åœ¨

å†…å®¹åº”åŒ…å«ï¼š
```
DATABASE_URL="postgresql://drone_log_user:drone_log_pass_2025@localhost:5432/drone_log_db"
JWT_SECRET="your-super-secret-jwt-key-change-in-production"
PORT=3000
```

### 3. ä¾èµ–å·²å®‰è£…

```bash
# å¦‚æœè¿˜æ²¡æœ‰å®‰è£…ä¾èµ–
npm install

# ç”ŸæˆPrisma Client
npx prisma generate
```

## å®Œæ•´å¯åŠ¨æµç¨‹

### æ­¥éª¤1ï¼šå¯åŠ¨æ•°æ®åº“
```bash
docker-compose up -d
```

### æ­¥éª¤2ï¼šå¯åŠ¨åç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
```bash
./å¯åŠ¨åç«¯.sh
```
åç«¯è¿è¡Œåœ¨ **http://localhost:3000**

### æ­¥éª¤3ï¼šå¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
```bash
npm run dev
```
å‰ç«¯è¿è¡Œåœ¨ **http://localhost:5173**

## å¸¸è§é—®é¢˜

### âŒ é—®é¢˜1ï¼šç«¯å£3000è¢«å ç”¨

**ç°è±¡**ï¼š
```
Error: listen EADDRINUSE: address already in use :::3000
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æŸ¥æ‰¾å ç”¨3000ç«¯å£çš„è¿›ç¨‹
lsof -i :3000

# å…³é—­è¿›ç¨‹ï¼ˆæ›¿æ¢<PID>ä¸ºä¸Šé¢å‘½ä»¤æ˜¾ç¤ºçš„è¿›ç¨‹IDï¼‰
kill -9 <PID>

# ç„¶åé‡æ–°å¯åŠ¨
./å¯åŠ¨åç«¯.sh
```

### âŒ é—®é¢˜2ï¼šæ‰¾ä¸åˆ°.envæ–‡ä»¶

**ç°è±¡**ï¼š
```
âŒ .env ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
åˆ›å»º.envæ–‡ä»¶ï¼š
```bash
cat > .env << 'EOF'
DATABASE_URL="postgresql://drone_log_user:drone_log_pass_2025@localhost:5432/drone_log_db"
JWT_SECRET="your-super-secret-jwt-key-change-in-production"
PORT=3000
EOF
```

### âŒ é—®é¢˜3ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**ç°è±¡**ï¼š
```
Error: Can't reach database server
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ç¡®ä¿Dockerè¿è¡Œ
docker-compose up -d

# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker-compose logs postgres
```

### âŒ é—®é¢˜4ï¼šPrisma Clientæœªç”Ÿæˆ

**ç°è±¡**ï¼š
```
Error: @prisma/client did not initialize yet
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ç”ŸæˆPrisma Client
npx prisma generate

# é‡æ–°å¯åŠ¨åç«¯
./å¯åŠ¨åç«¯.sh
```

### âŒ é—®é¢˜5ï¼šè„šæœ¬æ²¡æœ‰æ‰§è¡Œæƒé™

**ç°è±¡**ï¼š
```
Permission denied: ./å¯åŠ¨åç«¯.sh
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x å¯åŠ¨åç«¯.sh

# ç„¶åè¿è¡Œ
./å¯åŠ¨åç«¯.sh
```

## è°ƒè¯•æ¨¡å¼

å¦‚æœéœ€è¦æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š

```bash
# è®¾ç½®è°ƒè¯•æ¨¡å¼
DEBUG=* PORT=3000 npx tsx backend/src/index.ts
```

## åœæ­¢åç«¯

åœ¨è¿è¡Œåç«¯çš„ç»ˆç«¯ä¸­æŒ‰ **Ctrl + C**

## ç«¯å£é…ç½®æ€»ç»“

| æœåŠ¡ | ç«¯å£ | è®¿é—®åœ°å€ |
|------|------|----------|
| å‰ç«¯ | 5173 | http://localhost:5173 |
| åç«¯ | 3000 | http://localhost:3000/api |
| æ•°æ®åº“ | 5432 | localhost:5432 |

## ç›¸å…³æ–‡æ¡£

- ğŸ“˜ [ç«¯å£å†²çªä¿®å¤æ€»ç»“.md](./ç«¯å£å†²çªä¿®å¤æ€»ç»“.md)
- ğŸ“— [ç«¯å£é…ç½®è¯´æ˜.md](./ç«¯å£é…ç½®è¯´æ˜.md)
- ğŸ“• [QUICKSTART.md](./QUICKSTART.md)

---

**æ›´æ–°æ—¥æœŸ**: 2025å¹´11æœˆ14æ—¥  
**åç«¯ç«¯å£**: 3000ï¼ˆå·²ä¿®å¤ï¼‰



