# 🚀 5 分钟快速开始 - Supabase 版

## 📋 你将得到什么

- ✅ **账号登录系统** - 邮箱/密码注册登录
- ✅ **数据完全隔离** - 用户数据互不干扰
- ✅ **完整离线支持** - 无网络也能用
- ✅ **自动云同步** - 数据永不丢失
- ✅ **多设备同步** - 手机、电脑数据互通

---

## ⚡ 快速开始（3 步）

### 步骤 1：创建 Supabase 项目（2 分钟）

1. 访问 https://supabase.com → 注册/登录
2. 点击 **"New Project"**
3. 填写：
   - Name: `drone-log`（随意）
   - Password: 设置强密码
   - Region: **Tokyo** 或 **Singapore**
4. 等待创建完成

### 步骤 2：执行数据库脚本（1 分钟）

1. Supabase 控制台 → **SQL Editor**
2. 点击 **"New query"**
3. 复制 `supabase-migration.sql` 的**全部**内容
4. 粘贴 → 点击 **RUN**
5. 看到 ✅ 成功提示

### 步骤 3：配置密钥（1 分钟）

1. Supabase 控制台 → **Settings** → **API**
2. 复制两个值：
   - **Project URL**
   - **anon public key**
3. 在项目根目录创建 `.env` 文件：

```bash
VITE_SUPABASE_URL=粘贴你的URL
VITE_SUPABASE_ANON_KEY=粘贴你的密钥
```

4. **重启应用**：

```bash
npm run dev
```

---

## ✅ 验证成功

打开浏览器控制台（F12），看到：

```
🚀 初始化应用...
👤 未登录，将使用离线模式
💡 提示：登录后可实现多设备数据同步
✅ 同步服务初始化完成
```

**右上に「ログイン」ボタンが表示されたら、セットアップ完了です！🎉**

---

## 🔐 アカウント登録

1. **右上の「ログイン」ボタンをクリック**
2. **「新規登録」タブに切り替え**
3. **情報を入力：**
   - メールアドレス: `your@email.com`
   - パスワード: 6文字以上
   - パスワード確認
4. **「新規登録」をクリック**
5. ✅ **登録成功！**
   - 右上にユーザーアバターが表示されます
   - 同期状態が「オンライン」になります
   - アプリの使用を開始できます

**注意**：登録後、すべてのデータは自動的にアカウントに関連付けられ、他のユーザーはアクセスできません！

---

## 🧪 测试功能

### 测试 1：添加记录

1. 点击"飛行記録"
2. 填写信息 → 保存
3. 控制台显示：`✅ 飞行记录已保存`
4. Supabase 控制台 → **Table Editor** → `flight_logs` 表能看到数据

### 测试 2：离线使用

1. 断开网络（飞行模式或关Wi-Fi）
2. 添加一条新记录
3. 刷新页面 → 数据仍在 ✅
4. 重新联网 → 等待几秒 → 云端自动同步 ✅

### 测试 3：多设备同步（可选）

1. 设备A添加记录
2. 设备B打开应用（用同一账号）
3. 数据自动同步 ✅

---

## ❓ 遇到问题？

### 控制台显示 "offline"

**原因**：`.env` 配置错误或未重启

**解决**：
1. 检查 `.env` 文件内容
2. **重启开发服务器**（Ctrl+C 后重新 `npm run dev`）

### 数据未同步

**原因**：网络问题或配置错误

**调试**：
```javascript
// 浏览器控制台运行
const stats = await supabaseSyncService.getSyncStats();
console.log(stats);
// 查看 status 和 pendingSyncCount
```

---

## 📚 详细文档

- **完整指南**: `SUPABASE-SETUP.md`
- **迁移总结**: `SUPABASE-MIGRATION-SUMMARY.md`
- **SQL 脚本**: `supabase-migration.sql`

---

## 🎯 下一步

### 可选功能

1. **查看实时数据**
   - Supabase 控制台 → **Table Editor**
   - 实时查看和编辑数据

2. **设置数据保留策略**
   - Supabase → **Database** → **Policies**
   - 自定义权限规则

3. **启用实时订阅**（高级）
   - 取消 `supabase.service.ts` 中的订阅代码注释
   - 实现多用户协作

---

## 💡 小贴士

### 免费额度

Supabase 免费计划包括：
- ✅ 500MB 数据库存储
- ✅ 2GB 文件存储
- ✅ 无限 API 请求
- ✅ 50,000 月活跃用户

**对个人使用完全足够！**

### 数据备份

Supabase 自动备份：
- 每日自动备份
- 保留 7 天
- 可手动恢复

**你的数据很安全！**

---

**搞定！现在你有一个功能完整的云原生离线优先应用了！** 🎉

**问题？** 查看 `SUPABASE-SETUP.md` 的常见问题部分。

